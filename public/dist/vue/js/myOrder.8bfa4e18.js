(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["myOrder"],{"3b23":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"common_width dm_myOrder"},[r("TableTitle",{attrs:{title:"我的订单"}},[r("div",[t._v("（当前共有 "),r("i",[t._v(t._s(t.tableData.length))]),t._v(" 笔订单）")])]),r("el-table",{class:"dm_myOrder__title"+(t.tableData.length?" hidden":""),staticStyle:{width:"100%"},attrs:{border:"",size:"small"}},[t._l(t.columns,(function(t){return r("el-table-column",{key:t.id,attrs:{prop:t.prop,label:t.label,width:t.width,align:"center"}})})),r("el-table-column",{attrs:{prop:"operation",label:"操作",width:"140",align:"center"}})],2),t._l(t.tableData,(function(e,a){return r("div",{key:e.id,staticClass:"dm_myOrder__content"},[r("el-row",{staticClass:"t_header"},[r("el-col",{attrs:{span:6}},[t._v(t._s(e.submitTime))]),r("el-col",{attrs:{span:6}},[t._v("订单号： "+t._s(e.ordernum))]),r("el-col",{attrs:{span:12}},[r("span",{on:{click:function(r){return t.deleteCartClick(e.id)}}},[t._v("删")])])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.content,border:"",size:"small","show-header":!1}},[t._l(t.columns,(function(e){return r("el-table-column",{key:e.id,attrs:{prop:e.prop,label:e.label,width:e.width,align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return["mainPicture"==e.prop?r("img",{staticStyle:{width:"100%"},attrs:{src:t.$url+a.row.mainPicture}}):t._e(),"description"==e.prop?r("router-link",{staticClass:"title_style",attrs:{to:{name:"productsDetails",params:{id:a.row.id}}}},[r("span",{attrs:{title:a.row.description}},[t._v(t._s(a.row.description))]),r("span",{staticClass:"ellipsis"},[t._v("规格："+t._s(a.row.spec))])]):t._e(),"price"==e.prop||"totalprice"==e.prop?r("span",[t._v("￥"+t._s(t._f("keepTwoDecimalPlaces")("price"==e.prop?a.row["price"]:"totalprice"==e.prop?a.row["totalprice"]:0)))]):t._e(),"num"==e.prop?r("span",[t._v("x"+t._s(a.row.num))]):t._e()]}}],null,!0)})})),r("el-table-column",{attrs:{prop:"operation",label:"操作",width:"140",align:"center"}},[[r("div",{staticClass:"operation"},[r("span",{on:{click:function(r){return t.goNextPage("comment",e.id,a)}}},[t._v("评价")]),r("span",{on:{click:function(r){return t.goNextPage("detail",e.id)}}},[t._v("订单详情")])])]],2)],2)],1)}))],2)},n=[],i=(r("96cf"),r("1da1")),l={data:function(){return{columns:[{id:1,prop:"mainPicture",label:"主图",width:107},{id:2,prop:"description",label:"商品详情"},{id:3,prop:"price",label:"单价",width:162},{id:4,prop:"num",label:"数量",width:130},{id:5,prop:"totalprice",label:"小计",width:172}],tableData:[]}},mounted:function(){this.getAllOrderData()},methods:{goNextPage:function(t,e,r){var a=this,n={comment:function(){a.$router.push({name:"myComment",query:{id:e,oIndex:r}})},detail:function(){a.$router.push({name:"orderDetails",query:{id:e}})}};n[t]()},deleteCartClick:function(t){var e=this;this.$confirm("确认删除这笔订单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.postDeleteOrderData({id:t})})).catch((function(){}))},getAllOrderData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$service.getAllOrderData({uname:sessionStorage.getItem("uname")});case 2:r=e.sent;try{200===r.data.code&&(a=r.data.data||{},n=a.products,i=void 0===n?[]:n,t.tableData=i)}catch(l){console.log(l)}case 4:case"end":return e.stop()}}),e)})))()},postDeleteOrderData:function(){var t=arguments,e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.length>0&&void 0!==t[0]?t[0]:{},r.next=3,e.$service.postDeleteOrderData(a);case 3:n=r.sent;try{200===n.data.code&&e.getAllOrderData()}catch(i){console.log(i)}case 5:case"end":return r.stop()}}),r)})))()}}},o=l,s=(r("854f"),r("2877")),c=Object(s["a"])(o,a,n,!1,null,null,null);e["default"]=c.exports},"400b":function(t,e,r){},"854f":function(t,e,r){"use strict";var a=r("400b"),n=r.n(a);n.a}}]);
//# sourceMappingURL=myOrder.8bfa4e18.js.map