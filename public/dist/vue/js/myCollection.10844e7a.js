(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["myCollection"],{"13d5":function(t,e,n){"use strict";var a=n("23e7"),r=n("d58f").left,i=n("a640"),o=n("ae40"),c=i("reduce"),l=o("reduce",{1:0});a({target:"Array",proto:!0,forced:!c||!l},{reduce:function(t){return r(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"854a":function(t,e,n){},"91a5":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"common_width dm_myCollection"},[n("TableTitle",{attrs:{title:"宝贝收藏"}},[n("div",[t._v("（当前共有 "),n("i",[t._v(t._s(t.getTotal))]),t._v(" 件藏品）")])]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"max-height":"386",border:"","row-key":"id",size:"small"},on:{select:t.rowSelection,"select-all":t.rowAll}},[n("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),t._l(t.columns,(function(e){return n("el-table-column",{key:e.id,attrs:{prop:e.prop,label:e.label,width:e.width,align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return["mainPicture"==e.prop?n("img",{staticClass:"imgs_style",attrs:{src:t.$url+a.row.mainPicture}}):t._e(),"description"==e.prop?n("router-link",{staticClass:"title_style",attrs:{to:{name:"productsDetails",params:{id:a.row.pid}}}},[n("span",{attrs:{title:a.row.description}},[t._v(t._s(a.row.description))]),n("span",{staticClass:"ellipsis"},[t._v("规格："+t._s(a.row.spec))])]):t._e(),"price"==e.prop||"totalprice"==e.prop?n("span",[t._v("￥"+t._s(t._f("keepTwoDecimalPlaces")("price"==e.prop?a.row["price"]:"totalprice"==e.prop?a.row["totalprice"]:0)))]):t._e(),"num"==e.prop?n("span",[t._v("x"+t._s(a.row.num))]):t._e()]}}],null,!0)})})),n("el-table-column",{attrs:{prop:"operation",label:"操作",width:"148",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"operation"},[n("span",{on:{click:function(n){return t.deleteCartClick(e.row.id)}}},[t._v("删除")]),n("span",{on:{click:function(n){return t.addCollectionClick(e.row.id)}}},[t._v("加入购物车")])])]}}])})],2),n("el-row",{staticClass:"dm_myCollection__btn"},[n("el-col",{staticClass:"left",attrs:{span:12}},[n("el-button",{attrs:{plain:"",size:"small"},on:{click:function(e){return t.batchClick("del")}}},[t._v("批量删除")]),n("el-button",{attrs:{plain:"",size:"small"},on:{click:function(e){return t.batchClick("col")}}},[t._v("批量加入购物车")])],1),n("el-col",{staticClass:"right",attrs:{span:12}},[n("span",{staticClass:"num"},[t._v("已选择"),n("i",[t._v(t._s(t.getTotalNum))]),t._v("件商品")])])],1)],1)},r=[],i=(n("d81d"),n("13d5"),n("5530")),o=(n("96cf"),n("1da1")),c={data:function(){return{columns:[{id:1,prop:"mainPicture",label:"图片",width:86},{id:2,prop:"description",label:"商品"},{id:3,prop:"price",label:"单价",width:136},{id:4,prop:"num",label:"数量",width:119},{id:5,prop:"totalprice",label:"小计",width:136}],tableData:[],selection:[],row:{}}},mounted:function(){this.getAllCollectionData()},methods:{batchClick:function(t){var e=this,n=this.selection,a=n.map((function(t){return t.id})),r={del:function(){n.length?e.deleteCartClick(a):e.$message({message:"请选择需要删除的商品！",type:"warning"})},col:function(){n.length?e.addCollectionClick(a):e.$message({message:"请选择需要加入购物车的商品！",type:"warning"})}};r[t]()},deleteCartClick:function(t){var e=this;this.$confirm("此商品确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.postDeleteCollectionData({ids:Array.isArray(t)?t:[t]})})).catch((function(){}))},addCollectionClick:function(t){var e=this;this.$confirm("此商品确认加入购物车?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.postAddCollectionData({ids:Array.isArray(t)?t:[t]})})).catch((function(){}))},rowAll:function(t){this.selection=t},rowSelection:function(t,e){this.selection=t,this.row=e},getAllCollectionData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$service.getAllCollectionData({uname:sessionStorage.getItem("uname"),collection:1});case 2:n=e.sent;try{200===n.data.code&&(a=n.data||{},r=a.data,i=void 0===r?[]:r,t.tableData=i,t.selection=[],t.row={})}catch(o){console.log(o)}case 4:case"end":return e.stop()}}),e)})))()},postAddCollectionData:function(){var t=arguments,e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.length>0&&void 0!==t[0]?t[0]:{},n.next=3,e.$service.postAddCollectionData(Object(i["a"])({uname:sessionStorage.getItem("uname"),collection:0},a));case 3:r=n.sent;try{200===r.data.code&&(e.getAllCollectionData(),e.$store.dispatch("getCartNumData"))}catch(o){console.log(o)}case 5:case"end":return n.stop()}}),n)})))()},postDeleteCollectionData:function(){var t=arguments,e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.length>0&&void 0!==t[0]?t[0]:{},n.next=3,e.$service.postDeleteCollectionData(Object(i["a"])({uname:sessionStorage.getItem("uname")},a));case 3:r=n.sent;try{200===r.data.code&&e.getAllCollectionData()}catch(o){console.log(o)}case 5:case"end":return n.stop()}}),n)})))()}},computed:{getTotalNum:function(){var t=this.selection,e=t.reduce((function(t,e,n,a){return t+e.num}),0);return e},getTotal:function(){var t=this.tableData,e=t.reduce((function(t,e,n,a){return t+e.num}),0);return e}}},l=c,s=(n("9fc1"),n("2877")),u=Object(s["a"])(l,a,r,!1,null,null,null);e["default"]=u.exports},"9fc1":function(t,e,n){"use strict";var a=n("854a"),r=n.n(a);r.a},d58f:function(t,e,n){var a=n("1c0b"),r=n("7b0b"),i=n("44ad"),o=n("50c4"),c=function(t){return function(e,n,c,l){a(n);var s=r(e),u=i(s),d=o(s.length),p=t?d-1:0,f=t?-1:1;if(c<2)while(1){if(p in u){l=u[p],p+=f;break}if(p+=f,t?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:d>p;p+=f)p in u&&(l=n(l,u[p],p,s));return l}};t.exports={left:c(!1),right:c(!0)}},d81d:function(t,e,n){"use strict";var a=n("23e7"),r=n("b727").map,i=n("1dde"),o=n("ae40"),c=i("map"),l=o("map");a({target:"Array",proto:!0,forced:!c||!l},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=myCollection.10844e7a.js.map